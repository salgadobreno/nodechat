// Generated by CoffeeScript 1.4.0
(function() {
  var insertMessage;

  this.socket = io.connect();

  this.socket.on('connect', function(data) {
    var nickname;
    $('#status').html('Connected to chattr');
    nickname = prompt('What is your nickname?');
    return socket.emit('join', nickname);
  });

  this.socket.on('messages', function(data) {
    return insertMessage(data);
  });

  $(document).ready(function() {
    return $('#chat_form').submit(function(e) {
      var message;
      e.preventDefault();
      message = $('#chat_input').val();
      socket.emit('messages', message);
      return insertMessage(message);
    });
  });

  insertMessage = (function() {

    function insertMessage(data) {
      $("#messages").append("<p>" + data + "</p>");
    }

    return insertMessage;

  })();

}).call(this);
